<!DOCTYPE html>
<html>
  <head>
    <title>Million</title>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="O mais simples e eficiente aplicativo de educação financeira.">
    <link rel="icon" href="<%= image_url('million-logo.png') %>">
    <link rel="apple-touch-icon" href="<%= image_url('million-logo.png') %>">
    <%= csrf_meta_tags %>
    <%= stylesheet_link_tag 'application', media: 'all' %>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
  </head>

  <body>
    <v-app id="app" userid="<%= current_user.id %>">
      <v-navigation-drawer temporary v-model="drawer" absolute app>
        <v-list>
          <v-list-tile avatar>
            <v-list-tile-avatar>
              <v-icon>account_circle</v-icon>
            </v-list-tile-avatar>
            <v-list-tile-content>
              <v-list-tile-title><%= current_user.presentation_name %></v-list-tile-title>
            </v-list-tile-content>
          </v-list-tile>
        </v-list>
        <v-list>
          <v-divider></v-divider>

          <v-list-tile ripple>
            <v-list-tile-action ripple @click.stop="goto('<%= dashboard_path(current_user) %>')">
              <v-icon>dashboard</v-icon>
            </v-list-tile-action>
            <v-list-tile-content>
              <v-list-tile-title>Painel</v-list-tile-title>
            </v-list-tile-content>
          </v-list-tile>

          <v-list-tile ripple>
            <v-list-tile-action @click.stop="goto('<%= expenses_path(current_user) %>')">
              <v-icon>shopping_cart</v-icon>
            </v-list-tile-action>
            <v-list-tile-content>
              <v-list-tile-title>Despesas</v-list-tile-title>
            </v-list-tile-content>
          </v-list-tile>

          <v-list-tile ripple>
            <v-list-tile-action @click.stop="goto('<%= revenues_path(current_user) %>')">
              <v-icon>account_balance_wallet</v-icon>
            </v-list-tile-action>
            <v-list-tile-content>
              <v-list-tile-title>Receitas</v-list-tile-title>
            </v-list-tile-content>
          </v-list-tile>

          <v-list-tile ripple>
            <v-list-tile-action @click.stop="goto('<%= user_goals_path(current_user) %>')">
              <v-icon>my_location</v-icon>
            </v-list-tile-action>
            <v-list-tile-content>
              <v-list-tile-title>Objetivos</v-list-tile-title>
            </v-list-tile-content>
          </v-list-tile>

          <v-list-tile ripple>
            <v-btn href="<%= logout_path %>" data-method="delete" flat small>
              <v-list-tile-action>
                <v-icon>exit_to_app</v-icon>
              </v-list-tile-action>
              <v-list-tile-content>
                <v-list-tile-title>Sair</v-list-tile-title>
              </v-list-tile-content>
            </v-btn>
          </v-list-tile>
        </v-list>
      </v-navigation-drawer>
      <v-toolbar color="primary" extended>
        <v-toolbar-side-icon @click.stop="drawer = !drawer" class="hidden-md-and-up"></v-toolbar-side-icon>
        <v-spacer class="hidden-md-and-up"></v-spacer>
        <v-btn icon href="/">
          <image src="<%= image_url('million-logo.svg') %>">
        </v-btn>
        <v-spacer></v-spacer>

        <new-entry
          :options="<%= { userid: current_user.id, token: form_authenticity_token }.to_json %>"
          @entrycreated="createdEntry($event)"
          @entryfailed="failedEntry($event)">
        </new-entry>

        <v-spacer></v-spacer>
        <v-toolbar-items class="hidden-sm-and-down">
          <v-btn href="<%= dashboard_path(current_user) %>" flat small>Painel</v-btn>
          <v-btn href="<%= expenses_path(current_user) %>" flat small>Despesas</v-btn>
          <v-btn href="<%= revenues_path(current_user) %>" flat small>Receitas</v-btn>
          <v-btn href="<%= user_goals_path(current_user) %>" flat small>Objetivos</v-btn>
          <v-btn href="<%= logout_path %>" data-method="delete" flat small>Sair</v-btn>
        </v-toolbar-items>

        <v-toolbar-title slot="extension">
          <% if @intro.present? %>
            <intro :params="<%= @intro %>"></intro>
          <% end %>
        </v-toolbar-title>
      </v-toolbar>

      <v-content>
        <v-container fluid>
          <v-snackbar :timeout="6000" :bottom="true" color="error" v-model="isAlert">
            A operação não foi realizada com sucesso
            <v-btn flat color="primary" @click-native="isAlert = false">Fechar</v-btn>
          </v-snackbar>
          <v-snackbar :timeout="6000" :bottom="true" color="success" v-model="isNotice">
            Operação realizada com sucesso
            <v-btn flat color="primary" @click-native="isNotice = false">Fechar</v-btn>
          </v-snackbar>
          <% if flash[:notice].present? %>
            <v-alert type="success" :value="true" dismissible v-model="alert">
              <%= flash[:notice] %>
            </v-alert>
          <% elsif flash[:alert].present? %>
            <v-alert type="error" :value="true" dismissible v-model="alert">
              <%= flash[:alert] %>
            </v-alert>
          <% end %>
        </v-container>

        <%= yield %>
      </v-content>
      <v-footer height="auto" class="grey darken-3">
        <v-layout row wrap justify-center>
          <v-btn href="<%= root_path %>" color="white" flat>Home</v-btn>
          <v-btn href="mailto:dev.joaogustavo@gmail.com" color="white" flat>Contato</v-btn>

          <v-flex xs12 py-3 text-xs-center white--text>
            Hobbyright &copy; {{ new Date().getFullYear() }} Million - The first financial education app.
          </v-flex>
        </v-layout>
      </v-footer>
    </v-app>
    <%= javascript_pack_tag 'application' %>
    <%= javascript_include_tag 'application' %>
    <%= yield :google_chart %>
  </body>
</html>
